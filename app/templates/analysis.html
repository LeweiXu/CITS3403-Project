{% extends "base.html" %}

{% block title %}MediaTracker - Analysis{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Analysis Section -->
    <section id="analysis-section" class="wow fadeInUp" data-wow-delay=".1s">
        <h1 class="text-center">Analysis</h1>
        <div class="mt-4 row">
            <div class="col-md-4 wow fadeInUp" data-wow-delay=".2s">
                <div class="card a0 dark:a1 a2d p-3 shadow">
                    <h4>Total Time Spent</h4>
                    <p>Books: <span id="total-books">{{ analysis_data.statistics.total_books }} hours</span></p>
                    <p>Visual Media: <span id="total-visual-media">{{ analysis_data.statistics.total_visual_media }} hours</span></p>
                    <p>Games: <span id="total-games">{{ analysis_data.statistics.total_games }} hours</span></p>
                </div>
            </div>
            <div class="col-md-4 wow fadeInUp" data-wow-delay=".3s">
                <div class="card a0 dark:a1 a2d p-3 shadow">
                    <h4>Time Spent in the Past Week</h4>
                    <p>Books: <span id="week-books">{{ analysis_data.statistics.week_books }} hours</span></p>
                    <p>Visual Media: <span id="week-visual-media">{{ analysis_data.statistics.week_visual_media }} hours</span></p>
                    <p>Games: <span id="week-games">{{ analysis_data.statistics.week_games }} hours</span></p>
                </div>
            </div>
            <div class="col-md-4 wow fadeInUp" data-wow-delay=".4s">
                <div class="card a0 dark:a1 a2d p-3 shadow">
                    <h4>Longest Activity</h4>
                    <p>Media Name: <span id="longest-activity-name">{{ analysis_data.statistics.longest_activity.media_name }}</span></p>
                    <p>Duration: <span id="longest-activity-duration">{{ analysis_data.statistics.longest_activity.duration }} hours</span></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Rankings Section -->
    <section id="rankings-section" class="mt-5 wow fadeInUp" data-wow-delay=".5s">
        <h2>Rankings</h2>
        <div class="mb-3">
            <label for="ranking-select" class="form-label">Select Ranking:</label>
            <select id="ranking-select" class="form-select">
                <option value="activities-duration">Activities by Duration</option>
                <option value="entries-duration">Entries by Duration</option>
                <option value="activities-start-date">Activities by Start Date</option>
                <option value="entries-media-type">Entries by Media Type</option>
            </select>
        </div>
        <div id="ranking-view" class="card a0 dark:a1 a2d p-3 shadow">
            <h4>Activities Ranked by Duration</h4>
            <table class="table">
                <thead>
                    <tr>
                        <th>Media Name</th>
                        <th>Type</th>
                        <th>Duration</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for activity in analysis_data.rankings.activities_by_duration %}
                    <tr>
                        <td>{{ activity.media_name }}</td>
                        <td>{{ activity.media_type }}</td>
                        <td>{{ activity.total_duration }}</td>
                        <td>{{ activity.start_date }}</td>
                        <td>{{ activity.end_date }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <!-- Graphs Section -->
    <section id="graphs-section" class="mt-5 wow fadeInUp" data-wow-delay=".6s">
        <h2>Graphs</h2>
        <div class="mb-3">
            <label for="graph-select" class="form-label">Select Graph:</label>
            <select id="graph-select" class="form-select">
                <option value="daily-time">Total Time Spent Daily (Past Week)</option>
                <option value="weekly-average">Weekly Average Time (Past 10 Weeks)</option>
                <option value="daily-category">Daily Time by Category (Past Week)</option>
            </select>
        </div>
        <div id="graph-view" class="card a0 dark:a1 a2d p-3 shadow">
            <canvas id="graph-canvas" width="400" height="200"></canvas>
        </div>
    </section>
</div>

<link rel="stylesheet" href="{{ url_for('static', filename='css/animate.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/analysis.css') }}">
<script src="{{ url_for('static', filename='js/wow.min.js') }}"></script>
<script>
    // Initialize WOW.js
    new WOW().init();
</script>
{% endblock %}