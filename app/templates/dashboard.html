{% extends "base.html" %}

{% block title %}MediaTracker - Dashboard{% endblock %}

{% block content %}
<div class="container">
    <h1 class="text-center section-title">Dashboard</h1>
    <!-- Stats Overview Section -->
    <section class="stats-overview">
        <h2 class="section-title">Key Stats</h2>
        <p class="intro">Here you can view your media consumption statistics and insights.</p>
        <div class="stats-grid">
            <!-- Total time spent on media -->
            <div class="stats-metric-card">
                <div class="stats-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stats-info">
                    <h3>Total Time Spent</h3>
                    <p class="stats-value">{{ total_time }} hours</p>
                </div>
            </div>

            <!-- Most Consumed Media -->
            <div class="stats-metric-card">
                <div class="stats-icon">
                    <i class="fas fa-film"></i>
                </div>
                <div class="stats-info">
                    <h3>Most Consumed Media</h3>
                    <p class="stats-value">{{ most_consumed_media }}</p>
                </div>
            </div>

            <!-- Average Daily Media Consumption -->
            <div class="stats-metric-card">
                <div class="stats-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stats-info">
                    <h3>Average Daily Consumption</h3>
                    <p class="stats-value">{{ daily_average_time }} hours</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Current Media Section -->
    <section class="current-media mt-5">
        <h2 class="section-title">Current Activities</h2>
        <table class="table table-striped mt-4">
            <thead>
                <tr>
                    <th>Media Name</th>
                    <th>Media Type</th>
                    <th>Total Duration (minutes)</th>
                    <th>Add Duration</th>
                </tr>
            </thead>
            <tbody>
                {% for media in current_media %}
                <tr>
                    <td>{{ media.media_name }}</td>
                    <td>{{ media.media_type }}</td>
                    <td>{{ media.total_duration }}</td>
                    <td>
                        <form action="{{ url_for('dashboard') }}" method="POST" class="d-inline">
                            <input type="hidden" name="media_name" value="{{ media.media_name }}">
                            <input type="hidden" name="media_type" value="{{ media.media_type }}">
                            <input type="number" name="duration" class="form-control d-inline w-50" placeholder="Minutes" required>
                            <button type="submit" name="add_duration" class="btn btn-success btn-sm">Add</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <!-- Add New Media Entry Section -->
    <section class="add-new-entry mt-5">
        <h2 class="section-title">Add New</h2>
        <form action="{{ url_for('dashboard') }}" method="POST">
            <div class="mb-3">
                <label for="media_type" class="form-label">Media Type</label>
                <input type="text" id="media_type" name="media_type" class="form-control" placeholder="e.g., Movie, Book" required>
            </div>
            <div class="mb-3">
                <label for="media_name" class="form-label">Media Name</label>
                <input type="text" id="media_name" name="media_name" class="form-control" placeholder="e.g., Inception, 1984" required>
            </div>
            <button type="submit" name="add_new_entry" class="btn btn-primary">Add New Entry</button>
        </form>
    </section>
</div>
{% endblock %}