{% extends "base.html" %}

{% block title %}Share Community Data{% endblock %}

{% block content %}

<div class="text-end me-3 mt-3">
    <button class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#addFriendModal">
        Add Friend
    </button>
</div>

<div class="container mt-2 mb-5">
    <h2 class="mb-4 text-center">Anything new among friends?</h2>

    <div id="moments-section">
        <div class="moment-card d-flex">
            <img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" class="avatar">
            <div>
                <strong>Lily</strong><br>
                <p>I watched <em>Interstellar</em> this week. Highly recommended! ðŸŒŒ</p>
                <small class="text-muted">April 17, 2025 10:45 AM</small>
            </div>
        </div>
        <div class="moment-card d-flex">
            <img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" class="avatar">
            <div>
                <strong>Jason</strong><br>
                <p>I've kept up with 30 minutes of podcast listening every day for 2 weeks now! ðŸ’ªðŸŽ§</p>
                <small class="text-muted">April 16, 2025 6:30 PM</small>
            </div>
        </div>

        <!-- Button -->
        <button class="btn btn-primary rounded-circle add-post-btn" title="Create Post"
            data-bs-toggle="modal" data-bs-target="#createPostModal">
            <span style="font-size: 24px; line-height: 1;">+</span>
        </button>
    </div>

    <div id="chat-section" style="display: none;">
        <div class="chat-container">
            <div class="chat-users">
                <div onclick="switchChat('lily')">
                    <img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" class="avatar"> Lily
                </div>
                <div onclick="switchChat('jason')">
                    <img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" class="avatar"> Jason
                </div>
            </div>
            <div class="chat-window d-flex flex-column">
                <div class="chat-messages flex-grow-1 overflow-auto">
                    <div id="chat-lily">
                        <div class="message you">
                            <span class="message-content">What movies have you seen lately?</span>
                        </div>
                        <div class="message">
                            <span class="message-content them">Just finished watching <em>Interstellar</em>, it's amazing!</span>
                        </div>
                    </div>
                    <div id="chat-jason" style="display: none;">
                        <div class="message you">
                            <span class="message-content">What podcasts are you listening to?</span>
                        </div>
                        <div class="message">
                            <span class="message-content them">Currently listening to <em>The Daily</em>, it's quite good!</span>
                        </div>
                    </div>
                </div>
                <div class="chat-input p-2 border-top">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Type a message..." disabled>
                        <button class="btn btn-primary" type="button" disabled>Send</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="bottom-nav d-flex justify-content-around">
    <button class="nav-btn" onclick="showSection('moments')">Share Moment!</button>
    <button class="nav-btn" onclick="showSection('chat')">Chat</button>
</div>

<style>
    footer {
        display: none !important;
    }
</style>

<script>
    function showSection(section) {
        const isMoments = section === 'moments';
        document.getElementById('moments-section').style.display = isMoments ? 'block' : 'none';
        document.getElementById('chat-section').style.display = isMoments ? 'none' : 'block';
    }

    function switchChat(friend) {
        document.getElementById('chat-lily').style.display = (friend === 'lily') ? 'block' : 'none';
        document.getElementById('chat-jason').style.display = (friend === 'jason') ? 'block' : 'none';
    }
</script>

<!-- Add Friend Modal -->
<div class="modal fade" id="addFriendModal" tabindex="-1" aria-labelledby="addFriendModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addFriendModalLabel">Add New Friend</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <input type="text" class="form-control" placeholder="Enter friend's name...">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-success" disabled>Add</button>
            </div>
        </div>
    </div>
</div>

<!-- Create Post Modal -->
<div class="modal fade" id="createPostModal" tabindex="-1" aria-labelledby="createPostModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createPostModalLabel">Create New Post</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <textarea class="form-control" rows="3" placeholder="Share what you've spend on ..."></textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" disabled>Post</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}